# 그룹화

* 소괄호 () 사용
* () 안의 패턴을 하나의 그룹으로 매치하고 매치 결과를 저장
* 매치된 결과를 부분 문자열이라고 하고 저장하는 것을 capture라고 하낟.

## 매치 결과 캡처

* 패턴 문자 : ()

* 기능
  * ()안의 패턴으로 매치하고 그 결과를 캡처
  * 캡처된 값을 사용하여 () 밖의 패턴에 매치
  * (a|b)+는 a 또는 b에 매치하고 결과를 하나 이상에 매치
  * ex) 'ABC'.match(/(A)/);
    * 결과가 A가 아니고 AA다.
    * 먼저 괄호안의 A를 먼저 매치 시키면 결과 A가 캡처된다. /(A)/
    * 이 후 괄호가 상쇄되고 A가 남는다. /A/
    * 남은 A로 다시 패턴 매칭을 수행한다.
    * AA가 반환됨.
    * /((A))/ 인 경우에는 AAA가 반환됨.

## undefined 설정 메커니즘

* 배열 처리의 매커니즘
  * 일반적인 List에서는 배열의 중간 엘리먼트가 제거되면 그 뒤에 존재하는 엘리먼트들이 빈자리를 채우기 위해 땡겨지게 되므로 성능에 영향을 주게 되는데 자바스크립트의 경우에는 제거된 엘리먼트에 undefined가 대입되고 List를 읽을 때 undefined를 제거하고 읽는다.

* 매치 및 설정방법
  * 패턴에서 소괄호() 수만큼 반환할 배열의 2번째 인덱스부터 undefined를 설정
    * 소괄호의 우선순위는 밖에서 안으로, 왼쪽에서 오른쪽으로
  * 패턴을 매치하여 값이 매치되면 인덱스에 값 설정
  * 따라서 undefined가 매치된 값으로 대체됨
  * 소괄호()의 패턴이 매치되지 않으면 undefined가 유지됨
  * 반환할 배열의 첫 번째 인덱스에 전체 매치 값을 설정.

## Sub Pattern

* 소괄호() 안에 작성한 패턴을 지정
* (^12|34$)에서 ^12|34$를 subpattern 이라고 한다.
* ^12와 34$도 subpattern

## 캡처 값 참조

* ()로 캡처된 값을 참조
  1. 백레퍼런스(\숫자) 형태
    * 패턴 안에서 사용
  2. RegExp.$숫자 형태

## Template

* HTML5 <template>
  * <template></template>에 템플릿을 작성하고 자바스크립트로 template를 작성하여 표현.

* JavaScript template
  * 문자열과 자바스크립트로 템플릿 작성

* 현재 디렉토리의 template.html 참고

## Back Reference

* 패턴 문자 : \숫자

* 기능
  * 패턴 문자 ()로 캡처한 결과 값을 참조
  * ()로 캡처한 순서를 \에 이어서 작성
  * \1은 첫 번째 ()로 캡처한 값을 참조
  * 0은 null을 반환하며 1부터 9까지 지정 가능

* 표기ㅣ 기준
  * "역참조 특수 문자"라고도 부름
  * 스펙에서는 "십진 이스케이프"로 사용

## RegExp.$숫자

* 그룹화를 사용한 경우 캡처된 값을 Element Array에서 숫자에 해당하는 순서의 값을 반환
* 1~9까지 사용 가능
* 0이거나 범위를 초과하면 undefined 반환

## Backtracking

* 같은 코드를 따라 되돌아온다.

* lastIndex
  * 되돌아 오기 위해서는 돌아올 위치를 알아야한다.
  * 위치를 lastIndex에 저장

* 클로저
  * 돌아왔을 때 매치 대상을 알아야 하므로 매치 여부에 관계없이 매치 대상 저장 필요
  * 저장하는 곳을 클로저라고 한다.
  * 개념적이지만 정규 표현식 이해 필요.
  * String과 RegExp 사이의 중계 역할을 한다고 볼 수 있다.

## 캡처하지 않는 그룹

* 패턴 문자 : (?:)

* 매치 결과를 캡처하지 않음.

## 전방 매치

* 패턴 문자 : (?=)
  * ?= 다음에 매치 기준 위치 작성

* Lookahead
  * 'ABCC'.match(/AB(?=C)/);
  * ?=에 이어 작성한 문자를 매치하여 먼저 매치 기준 위치를 찾고 그 위치에서 앞으로 매치
    * 전방 검색이라고도 부름
  * 뒤로 매치하는 것을 후방매치라고 하며 자바스크립트에서는 지원하지 않음

## 전방 부정 매치

* 패턴 문자 : (?!)
